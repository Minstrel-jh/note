# 数据类型

> <https://wangdoc.com/javascript/types/index.html>  

## **对象（object）**

### 对象基本概念

- 什么事对象？

  对象就是一组“键值对”（key-value）的集合，是一种无序的复合数据集合。

  - 对象的每一个键名又称为“属性”（property），它的“键值”可以是任何数据类型。
  - 如果一个属性的值为函数，通常把这个属性称为“方法”（method?）。
  - 如果属性的值还是一个对象，就形成了链式引用。
  - 最后一个属性后面可以加逗号（trailing comma），也可以不加。
  - 属性可以动态创建，不必在对象声明时就指定。

- 键名规则：
  - 对象的所有键名都是字符串（ES6 又引入了 Symbol 值也可以作为键名）
  - 键名是数值，会被自动转为字符串
  - 键名不符合`标识名`的条件，则必须加上引号

- 对象的引用
  - 不同的变量名指向同一个对象，那么它们都是这个对象的引用，也就是说指向同一个内存地址。修改其中一个变量，会影响到其他所有变量。
  - 取消某一个变量对于原对象的引用，不会影响到另一个变量。
  - 这种引用只`局限于对象`，如果两个变量指向同一个`原始类型`的值。那么，变量这时都是值的`拷贝`。

- 对象的二义性：表达式还是语句？

  对象采用大括号表示，这导致了一个问题：如果行首是一个大括号，它到底是表达式还是语句？  
  JavaScript 引擎的做法是，如果遇到这种情况，无法确定是对象还是代码块，一律解释为代码块。  
  如果要解释为对象，最好在大括号前加上圆括号。因为圆括号的里面，只能是表达式，所以确保大括号只能解释为对象。

### 属性操作

- 属性的读取
  - 点运算符
  - 方括号运算符
- 属性的赋值
- 属性的查看: Object.keys(obj)
- 属性的删除：delete命令
- 属性是否存在: in运算符
- 属性的遍历：for...in循环

### with语句

作用是操作同一个对象的多个属性时，提供一些书写的方便

```javascript
with (对象) {
  语句;
}
```

## **函数（function）**

### 函数基本概念

- 函数声明
  - function命令
  - 函数表达式
  - Function构造函数(很不直观，几乎不用)
- 重复声明问题
- 函数名提升

### 函数的属性和方法

- name属性
- length属性
- toString()

### 函数作用域

- `全局作用域`  
  - 函数外部声明的变量(全局作用域，全局变量)，可在函数内部使用
- `函数作用域`
  - 函数内部声明的变脸(函数作用域，局部变量)，函数外部无法使用
  - 局部变量在函数内部会覆盖全局变量的值
- 块级作用域(ES6新增)

### 闭包（closure）

- "链式作用域"结构（chain scope）

  子对象会一级一级地向上寻找所有父对象的变量。所以，父对象的所有变量，对子对象都是可见的，反之则不成立。

- 闭包是什么？

  只有函数内部的子函数才能读取内部变量，因此可以把闭包简单理解成“定义在一个函数内部的函数”。闭包就是将函数内部和函数外部连接起来的一座桥梁。

- 闭包的用处:
  - 可以读取函数内部的变量
  - 让这些变量始终保持在内存中

### 立即调用的函数表达式（IIFE）

- 立即调用函数表达式的问题  
  圆括号()是一种运算符，跟在函数名之后，表示调用该函数。  
  我们需要在定义函数之后，立即调用该函数。这时，你不能在函数的定义之后加上圆括号，这会产生语法错误。

- function的二义性：  
  `function`这个关键字即可以当作语句，也可以当作表达式。

- 原因：  
  JavaScript 引擎规定，如果function关键字出现在行首，一律解释成语句。  
  因此，JavaScript 引擎看到行首是function关键字之后，认为这一段都是函数的定义，不应该以圆括号结尾

- 解决方法：  
  让function出现在行首，让引擎将其理解成一个表达式。最简单的处理，就是将其放在一个圆括号里面。

  ```javascript
  (function(){ /* code */ }());
  // 或者
  (function(){ /* code */ })();
  ```

### eval命令

`eval`命令接受一个字符串作为参数，并将这个字符串当作语句执行。

